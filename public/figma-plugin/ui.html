<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dynamic Detail Page Automator</title>
  <style>
    body { 
      font-family: Inter, Arial, sans-serif; 
      margin: 16px; 
      background: #f8f9fa;
    }
    
    .header {
      background: linear-gradient(135deg, #5b6ef5 0%, #3f51b5 100%);
      color: white;
      padding: 16px;
      margin: -16px -16px 20px -16px;
      border-radius: 0 0 12px 12px;
    }
    
    .header h2 { 
      margin: 0 0 8px; 
      font-size: 18px; 
      font-weight: 600;
    }
    
    .header p {
      margin: 0;
      font-size: 12px;
      opacity: 0.9;
    }
    
    .section {
      background: white;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 16px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .section-title {
      font-size: 14px;
      font-weight: 600;
      color: #333;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .analysis-summary {
      background: #f0f9ff;
      border: 1px solid #bae6fd;
      border-radius: 6px;
      padding: 12px;
      margin-bottom: 16px;
    }
    
    .analysis-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 4px;
      font-size: 12px;
    }
    
    .analysis-item:last-child {
      margin-bottom: 0;
    }
    
    .detected-template {
      background: #dcfce7;
      color: #166534;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 11px;
      font-weight: 600;
    }
    
    .node-group {
      margin-bottom: 20px;
    }
    
    .node-group-title {
      font-size: 13px;
      font-weight: 600;
      color: #374151;
      margin-bottom: 12px;
      padding-bottom: 6px;
      border-bottom: 1px solid #e5e7eb;
    }
    
    .node-item {
      background: #f9fafb;
      border: 1px solid #e5e7eb;
      border-radius: 6px;
      padding: 12px;
      margin-bottom: 8px;
    }
    
    .node-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }
    
    .node-name {
      font-size: 12px;
      font-weight: 600;
      color: #374151;
    }
    
    .node-info {
      font-size: 10px;
      color: #6b7280;
    }
    
    .node-preview {
      font-size: 11px;
      color: #6b7280;
      font-style: italic;
      margin-bottom: 8px;
      background: #f3f4f6;
      padding: 4px 8px;
      border-radius: 4px;
    }
    
    label { 
      display: block; 
      font-size: 11px; 
      color: #555; 
      margin-bottom: 4px; 
      font-weight: 500;
    }
    
    input, textarea { 
      width: 100%; 
      box-sizing: border-box; 
      padding: 8px; 
      border: 1px solid #d1d5db; 
      border-radius: 4px; 
      font-size: 12px;
      transition: border-color 0.2s;
    }
    
    input:focus, textarea:focus {
      outline: none;
      border-color: #5b6ef5;
    }
    
    textarea { 
      height: 60px; 
      resize: vertical; 
    }
    
    .image-upload-area {
      border: 2px dashed #d1d5db;
      border-radius: 6px;
      padding: 20px;
      text-align: center;
      background: #f9fafb;
      transition: all 0.2s;
      cursor: pointer;
    }
    
    .image-upload-area:hover {
      border-color: #5b6ef5;
      background: #f0f2ff;
    }
    
    .image-upload-area.has-image {
      border-color: #10b981;
      background: #f0fdf4;
    }
    
    .upload-icon {
      font-size: 24px;
      color: #6b7280;
      margin-bottom: 8px;
    }
    
    .upload-text {
      font-size: 12px;
      color: #374151;
      margin-bottom: 4px;
    }
    
    .upload-subtext {
      font-size: 10px;
      color: #6b7280;
    }
    
    .image-preview {
      margin-top: 8px;
    }
    
    .image-preview img {
      max-width: 100%;
      max-height: 80px;
      border-radius: 4px;
    }
    
    
    .button-group {
      display: flex;
      gap: 8px;
      margin-top: 16px;
    }
    
    button { 
      flex: 1;
      padding: 12px; 
      border: 0; 
      border-radius: 6px; 
      background: #5b6ef5; 
      color: #fff; 
      cursor: pointer; 
      font-size: 13px;
      font-weight: 500;
      transition: all 0.2s;
    }
    
    button:hover {
      background: #4c5ce8;
      transform: translateY(-1px);
    }
    
    button.secondary { 
      background: #e6e8ff; 
      color: #3f51b5; 
    }
    
    button.secondary:hover {
      background: #d1d5ff;
    }
    
    button.danger {
      background: #ef4444;
    }
    
    button.danger:hover {
      background: #dc2626;
    }

    button.web-integration {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      font-weight: 600;
    }

    button.web-integration:hover {
      background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
      transform: translateY(-1px);
    }
    
    button:disabled {
      background: #d1d5db;
      cursor: not-allowed;
      transform: none;
    }
    
    .status {
      padding: 8px 12px;
      border-radius: 6px;
      font-size: 12px;
      margin-top: 12px;
      display: none;
    }
    
    .status.success {
      background: #dcfce7;
      color: #166534;
      border: 1px solid #bbf7d0;
    }
    
    .status.error {
      background: #fef2f2;
      color: #dc2626;
      border: 1px solid #fecaca;
    }
    
    .status.info {
      background: #dbeafe;
      color: #1e40af;
      border: 1px solid #bfdbfe;
    }
    
    .download-link {
      display: none;
      margin-top: 12px;
      padding: 8px 12px;
      background: #059669;
      color: white;
      text-decoration: none;
      border-radius: 6px;
      font-size: 12px;
      text-align: center;
    }
    
    .download-link:hover {
      background: #047857;
    }
    
    .empty-state {
      text-align: center;
      padding: 40px 20px;
      color: #6b7280;
    }
    
    .empty-state-icon {
      font-size: 48px;
      margin-bottom: 16px;
    }
    
    .empty-state-text {
      font-size: 14px;
      margin-bottom: 8px;
    }
    
    .empty-state-subtext {
      font-size: 12px;
    }
  </style>
  <script>
    // ì „ì—­ ë³€ìˆ˜
    let pageAnalysis = null;
    let nodeValues = {}; // {nodeId: value} í˜•íƒœë¡œ ì €ì¥

    // í”¼ê·¸ë§ˆ í”ŒëŸ¬ê·¸ì¸ í™˜ê²½ í™•ì¸
    if (typeof parent === 'undefined') {
      window.parent = {
        postMessage: function(data, origin) {
          console.log('Mock postMessage:', data);
        }
      };
    }

    function post(type, payload) { 
      try {
        parent.postMessage({ pluginMessage: { type, payload } }, '*');
      } catch (error) {
        console.error('Post message error:', error);
      }
    }

    function onmessage(event) {
      try {
        const msg = event.data && event.data.pluginMessage;
        if (!msg) return;

        switch (msg.type) {
          case 'page-analysis':
            pageAnalysis = msg.payload;
            updatePageAnalysis();
            generateDynamicUI();
            break;
          case 'update-complete':
            const payload = msg.payload || {};
            setStatus(`${payload.updatedCount || 0}ê°œ ë…¸ë“œê°€ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.${payload.errorCount > 0 ? ` (${payload.errorCount}ê°œ ì˜¤ë¥˜)` : ''}`, 'success');
            break;
          case 'export-done':
            const exportPayload = msg.payload || {};
            const base64 = exportPayload.base64;
            const filename = exportPayload.filename || 'export.png';
            
            if (base64) {
              const link = document.getElementById('download');
              if (link) {
                link.href = 'data:image/png;base64,' + base64;
                link.download = filename;
                link.textContent = 'PNG ë‹¤ìš´ë¡œë“œ';
                link.style.display = 'block';
              }
              setStatus('ê³ í’ˆì§ˆ PNG ë‚´ë³´ë‚´ê¸°ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            }
            break;
          case 'error':
            const errorMsg = msg.payload && msg.payload.message;
            setStatus('ì˜¤ë¥˜: ' + (errorMsg || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'), 'error');
            break;
          case 'clone-complete':
            const cloneData = msg.payload || {};
            setStatus(`íŒŒì¼ì´ ì„±ê³µì ìœ¼ë¡œ ë³µì œë˜ì—ˆìŠµë‹ˆë‹¤! (${cloneData.nodeCount}ê°œ ë…¸ë“œ)`, 'success');
            break;
          case 'clone-error':
            const cloneError = msg.payload && msg.payload.error;
            setStatus('íŒŒì¼ ë³µì œ ì‹¤íŒ¨: ' + (cloneError || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'), 'error');
            break;
          default:
            console.warn('Unknown message type:', msg.type);
        }
      } catch (error) {
        console.error('Message handling error:', error);
        setStatus('ë©”ì‹œì§€ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
      }
    }

    function updatePageAnalysis() {
      if (!pageAnalysis) return;
      
      const analysisDiv = document.getElementById('pageAnalysis');
      if (!analysisDiv) return;
      
      analysisDiv.innerHTML = `
        <div class="analysis-item">
          <span>í”„ë ˆì„ ìˆ˜:</span>
          <span>${pageAnalysis.frames || 0}</span>
        </div>
        <div class="analysis-item">
          <span>í…ìŠ¤íŠ¸ ë…¸ë“œ:</span>
          <span>${pageAnalysis.textNodes || 0}</span>
        </div>
        <div class="analysis-item">
          <span>ì´ë¯¸ì§€ ë…¸ë“œ:</span>
          <span>${pageAnalysis.imageNodes || 0}</span>
        </div>
      `;
    }

    function generateDynamicUI() {
      if (!pageAnalysis) return;

      const textNodesContainer = document.getElementById('textNodesContainer');
      const imageNodesContainer = document.getElementById('imageNodesContainer');
      
      if (!textNodesContainer || !imageNodesContainer) return;

      // í…ìŠ¤íŠ¸ ë…¸ë“œ UI ìƒì„±
      if (pageAnalysis.textNodeDetails && pageAnalysis.textNodeDetails.length > 0) {
        textNodesContainer.innerHTML = `
          <div class="node-group-title">ğŸ“ í…ìŠ¤íŠ¸ ë…¸ë“œ (${pageAnalysis.textNodeDetails.length}ê°œ)</div>
          ${pageAnalysis.textNodeDetails.map(node => `
            <div class="node-item">
              <div class="node-header">
                <span class="node-name">${node.name}</span>
                <span class="node-info">${node.fontSize}px â€¢ ${node.fontFamily}</span>
              </div>
              ${node.preview ? `<div class="node-preview">í˜„ì¬: "${node.preview}"</div>` : ''}
              <label for="text-${node.id}">ìƒˆ í…ìŠ¤íŠ¸ ë‚´ìš©:</label>
              <textarea 
                id="text-${node.id}" 
                data-node-id="${node.id}"
                placeholder="ìƒˆë¡œìš´ í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”..."
                onchange="updateNodeValue('${node.id}', this.value)"
              >${node.currentValue || ''}</textarea>
            </div>
          `).join('')}
        `;
      } else {
        textNodesContainer.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">ğŸ“</div>
            <div class="empty-state-text">í…ìŠ¤íŠ¸ ë…¸ë“œê°€ ì—†ìŠµë‹ˆë‹¤</div>
            <div class="empty-state-subtext">í˜ì´ì§€ì— í…ìŠ¤íŠ¸ ìš”ì†Œë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”</div>
          </div>
        `;
      }

      // ì´ë¯¸ì§€ ë…¸ë“œ UI ìƒì„±
      if (pageAnalysis.imageNodeDetails && pageAnalysis.imageNodeDetails.length > 0) {
        imageNodesContainer.innerHTML = `
          <div class="node-group-title">ğŸ–¼ï¸ ì´ë¯¸ì§€ ë…¸ë“œ (${pageAnalysis.imageNodeDetails.length}ê°œ)</div>
          ${pageAnalysis.imageNodeDetails.map(node => `
            <div class="node-item">
              <div class="node-header">
                <span class="node-name">${node.name}</span>
                <span class="node-info">${Math.round(node.width)}Ã—${Math.round(node.height)}px</span>
              </div>
              <div class="image-upload-area ${node.hasImage ? 'has-image' : ''}" onclick="document.getElementById('image-${node.id}').click()">
                <div class="upload-icon">${node.hasImage ? 'ğŸ–¼ï¸' : 'ğŸ“·'}</div>
                <div class="upload-text">${node.hasImage ? 'ì´ë¯¸ì§€ ë³€ê²½' : 'ì´ë¯¸ì§€ ì—…ë¡œë“œ'}</div>
                <div class="upload-subtext">í´ë¦­í•˜ì—¬ ì´ë¯¸ì§€ ì„ íƒ</div>
                <input 
                  type="file" 
                  id="image-${node.id}" 
                  data-node-id="${node.id}"
                  accept="image/*" 
                  style="display: none;"
                  onchange="handleImageUpload('${node.id}', this)"
                />
                <div class="image-preview" id="preview-${node.id}"></div>
              </div>
            </div>
          `).join('')}
        `;
      } else {
        imageNodesContainer.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">ğŸ–¼ï¸</div>
            <div class="empty-state-text">ì´ë¯¸ì§€ ë…¸ë“œê°€ ì—†ìŠµë‹ˆë‹¤</div>
            <div class="empty-state-subtext">í˜ì´ì§€ì— ì‚¬ê°í˜•ì´ë‚˜ ì›í˜• ìš”ì†Œë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”</div>
          </div>
        `;
      }
    }

    function updateNodeValue(nodeId, value) {
      nodeValues[nodeId] = value;
    }

    function handleImageUpload(nodeId, input) {
      const file = input.files[0];
      if (!file) return;

      if (!file.type.startsWith('image/')) {
        setStatus('ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.', 'error');
        return;
      }

      const reader = new FileReader();
      reader.onload = function(e) {
        try {
          // base64 ë°ì´í„°ì—ì„œ data:image/...;base64, ë¶€ë¶„ ì œê±°
          const base64 = e.target.result.split(',')[1];
          nodeValues[nodeId] = base64;
          
          // ë¯¸ë¦¬ë³´ê¸° í‘œì‹œ
          const preview = document.getElementById(`preview-${nodeId}`);
          if (preview) {
            preview.innerHTML = `<img src="${e.target.result}" alt="ë¯¸ë¦¬ë³´ê¸°">`;
          }
          
          // ì—…ë¡œë“œ ì˜ì—­ ìŠ¤íƒ€ì¼ ë³€ê²½
          const uploadArea = input.parentElement;
          uploadArea.classList.add('has-image');
          
          setStatus('ì´ë¯¸ì§€ê°€ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
        } catch (error) {
          console.error('Image processing error:', error);
          setStatus('ì´ë¯¸ì§€ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
        }
      };
      reader.onerror = function() {
        setStatus('ì´ë¯¸ì§€ ì½ê¸° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
      };
      reader.readAsDataURL(file);
    }


    function setStatus(text, type) {
      const statusDiv = document.getElementById('status');
      if (!statusDiv) return;
      
      statusDiv.textContent = text || '';
      statusDiv.className = `status ${type || 'info'}`;
      statusDiv.style.display = 'block';
      
      // 3ì´ˆ í›„ ìë™ ìˆ¨ê¹€
      setTimeout(() => {
        statusDiv.style.display = 'none';
      }, 3000);
    }

    function applyChanges() {
      try {
        if (!pageAnalysis) {
          setStatus('í˜ì´ì§€ ë¶„ì„ì„ ë¨¼ì € ì‹¤í–‰í•´ì£¼ì„¸ìš”.', 'error');
          return;
        }

        // í…ìŠ¤íŠ¸ ë…¸ë“œì™€ ì´ë¯¸ì§€ ë…¸ë“œ ë°ì´í„° ë¶„ë¦¬
        const textNodes = {};
        const imageNodes = {};

        // ëª¨ë“  ì…ë ¥ í•„ë“œì—ì„œ ê°’ ìˆ˜ì§‘
        Object.keys(nodeValues).forEach(nodeId => {
          const value = nodeValues[nodeId];
          
          // í…ìŠ¤íŠ¸ ë…¸ë“œì¸ì§€ ì´ë¯¸ì§€ ë…¸ë“œì¸ì§€ í™•ì¸
          const isTextNode = pageAnalysis.textNodeDetails && 
            pageAnalysis.textNodeDetails.some(node => node.id === nodeId);
          
          if (isTextNode) {
            textNodes[nodeId] = value;
          } else {
            imageNodes[nodeId] = value;
          }
        });

        if (Object.keys(textNodes).length === 0 && Object.keys(imageNodes).length === 0) {
          setStatus('ë³€ê²½í•  ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.', 'error');
          return;
        }

        setStatus('ë…¸ë“œ ì—…ë°ì´íŠ¸ ì¤‘...', 'info');
        
        post('update-nodes', {
          textNodes: textNodes,
          imageNodes: imageNodes
        });
      } catch (error) {
        console.error('Apply changes error:', error);
        setStatus('ë³€ê²½ì‚¬í•­ ì ìš© ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
      }
    }


    function exportPNG() {
      try {
        setStatus('ê³ í’ˆì§ˆ PNG ë‚´ë³´ë‚´ê¸° ì¤‘...', 'info');
        post('export-png');
      } catch (error) {
        console.error('Export PNG error:', error);
        setStatus('PNG ë‚´ë³´ë‚´ê¸° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
      }
    }

    function analyzePage() {
      try {
        setStatus('í˜ì´ì§€ ë¶„ì„ ì¤‘...', 'info');
        post('analyze-page');
      } catch (error) {
        console.error('Analyze page error:', error);
        setStatus('í˜ì´ì§€ ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
      }
    }

    function closePlugin() { 
      try {
        post('close');
      } catch (error) {
        console.error('Close plugin error:', error);
      }
    }

    // ì›¹ì•± ì—°ë™ í•¨ìˆ˜
    function processWebDesigns() {
      try {
        setStatus('ğŸŒ ì›¹ì•±ì—ì„œ ëŒ€ê¸° ì¤‘ì¸ ë””ìì¸ì„ í™•ì¸í•˜ê³  ìˆìŠµë‹ˆë‹¤...', 'info');
        post('process-web-designs');
      } catch (error) {
        console.error('ì›¹ì•± ë””ìì¸ ì²˜ë¦¬ ì˜¤ë¥˜:', error);
        setStatus('ì›¹ì•± ë””ìì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
      }
    }

    // íŒŒì¼ ë³µì œ í•¨ìˆ˜
    function cloneFile() {
      try {
        // ì‚¬ìš©ì ì •ë³´ ì…ë ¥ ë°›ê¸°
        const userId = prompt('ì‚¬ìš©ì IDë¥¼ ì…ë ¥í•˜ì„¸ìš”:', 'anonymous');
        if (!userId) {
          setStatus('ì‚¬ìš©ì IDê°€ í•„ìš”í•©ë‹ˆë‹¤.', 'error');
          return;
        }

        const templateId = prompt('í…œí”Œë¦¿ IDë¥¼ ì…ë ¥í•˜ì„¸ìš”:', 'youtube-thumbnail-test');
        if (!templateId) {
          setStatus('í…œí”Œë¦¿ IDê°€ í•„ìš”í•©ë‹ˆë‹¤.', 'error');
          return;
        }

        const templateName = prompt('í…œí”Œë¦¿ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”:', 'ìœ íŠœë¸Œ ì¸ë„¤ì¼ í…ŒìŠ¤íŠ¸');
        if (!templateName) {
          setStatus('í…œí”Œë¦¿ ì´ë¦„ì´ í•„ìš”í•©ë‹ˆë‹¤.', 'error');
          return;
        }

        setStatus('ğŸ“‹ íŒŒì¼ì„ ë³µì œí•˜ê³  ìˆìŠµë‹ˆë‹¤...', 'info');
        
        post('clone-file', {
          userId: userId,
          templateId: templateId,
          templateName: templateName
        });
      } catch (error) {
        console.error('íŒŒì¼ ë³µì œ ì˜¤ë¥˜:', error);
        setStatus('íŒŒì¼ ë³µì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
      }
    }

    // DOM ë¡œë“œ ì™„ë£Œ í›„ ì´ˆê¸°í™”
    document.addEventListener('DOMContentLoaded', function() {
      try {
        // í˜ì´ì§€ ë¶„ì„ ì‹¤í–‰
        analyzePage();
      } catch (error) {
        console.error('Initialization error:', error);
        setStatus('ì´ˆê¸°í™” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
      }
    });

    // ì „ì—­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
    window.addEventListener('message', onmessage);
  </script>
</head>
<body>
  <div class="header">
    <h2>ğŸ¨ Dynamic Detail Page Automator</h2>
    <p>ë…¸ë“œ ê¸°ë°˜ ë™ì  ìƒì„¸í˜ì´ì§€ ìë™ ìƒì„±</p>
  </div>

  <div class="analysis-summary" id="pageAnalysis">
    <div class="analysis-item">
      <span>í˜ì´ì§€ ë¶„ì„ ì¤‘...</span>
    </div>
  </div>

  <div class="section">
    <div class="section-title">
      ğŸ“ í…ìŠ¤íŠ¸ ë…¸ë“œ í¸ì§‘
    </div>
    <div id="textNodesContainer">
      <div class="empty-state">
        <div class="empty-state-icon">â³</div>
        <div class="empty-state-text">í˜ì´ì§€ ë¶„ì„ ì¤‘...</div>
      </div>
    </div>
  </div>

  <div class="section">
    <div class="section-title">
      ğŸ–¼ï¸ ì´ë¯¸ì§€ ë…¸ë“œ í¸ì§‘
    </div>
    <div id="imageNodesContainer">
      <div class="empty-state">
        <div class="empty-state-icon">â³</div>
        <div class="empty-state-text">í˜ì´ì§€ ë¶„ì„ ì¤‘...</div>
      </div>
    </div>
  </div>


  <div class="button-group">
    <button onclick="applyChanges()">âœ… ë³€ê²½ì‚¬í•­ ì ìš©</button>
  </div>

  <div class="button-group">
    <button class="secondary" onclick="analyzePage()">ğŸ” í˜ì´ì§€ ì¬ë¶„ì„</button>
    <button class="secondary" onclick="exportPNG()">ğŸ“¥ PNG ë‚´ë³´ë‚´ê¸°</button>
  </div>

  <div class="button-group">
    <button class="web-integration" onclick="processWebDesigns()">ğŸŒ ì›¹ì•± ë””ìì¸ ì²˜ë¦¬</button>
  </div>

  <div class="button-group">
    <button class="web-integration" onclick="cloneFile()">ğŸ“‹ íŒŒì¼ ë³µì œ</button>
  </div>

  <button class="danger" onclick="closePlugin()">âŒ ë‹«ê¸°</button>

  <div id="status" class="status"></div>
  <a id="download" class="download-link" href="#" download>PNG ë‹¤ìš´ë¡œë“œ</a>
</body>
</html>